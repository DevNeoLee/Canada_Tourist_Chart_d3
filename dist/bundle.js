!function(t){var e={};function a(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=e,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(r,n,function(e){return t[e]}.bind(null,n));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=0)}([function(t,e,a){"use strict";a.r(e);const r=d3.select("body").append("div").attr("class","tooltip").style("opacity",0);function n(t,e){d3.select(this).transition().duration(0).style("opacity","0.4"),r.transition().duration(0).style("opacity",1),r.html(t.GEO+" on "+t.REF_DATE+"<br/>tourists from overseas: "+t.VALUE+" persons").style("left",d3.event.pageX-50+"px").style("top",d3.event.pageY-100+"px")}function s(t,e){d3.select(this).transition().duration(0).style("opacity","1"),d3.selectAll("div.tooltip").style("opacity",0)}let l=d3.select("body").append("div").attr("class","tooltip").style("opacity",0);function o(t,e){l.transition().duration(0).style("opacity",.9),l.html(t.GEO+" on "+t.REF_DATE+"<br/>Tourists from Overseas: "+t.VALUE+" persons").style("left",d3.event.pageX-100+"px").style("top",d3.event.pageY-120+"px")}function d(t,e){d3.selectAll("div.tooltip").style("opacity",0)}const i=(t,e=10,a=7)=>{const r=[];for(let n=0;n<t.length&&(parseInt(t[n].REF_DATE.slice(2,4))==e&&parseInt(t[n].REF_DATE.slice(5,7))==a&&r.push(t[n]),12!=r.length);n++);!function(t){t.push({REF_DATE:t[0].REF_DATE,GEO:"Northwest Territories",VALUE:"0"});const e=[t[9],t[4],t[11],t[1],t[7],t[10],t[6],t[5],t[3],t[12],t[8],t[0],t[2]],a=62,r=30,n=50,s=50,l=505-a-s,i=670-r-n,c=d3.select(".mapWrap").append("svg").attr("width",i+r+n).attr("height",l+a+s).attr("class","map").append("g").attr("transform","translate("+r+","+a+")"),p=d3.scaleThreshold().domain([14e4,0]).range([0,500]),u=d3.axisRight().scale(p),f=[0,500,5e3,1e4,5e4,1e5,3e5,7e5,1e6,13e5,17e5],y=d3.scaleThreshold().domain(f).range(["#ffffff","#f7fbff","#e3eef9","#cfe1f2","#b5d4e9","#93c3df","#6daed5","#4b97c9","#2f7ebc","#1864aa","#0a4a90","#08306b"]),x=d3.geoMercator().scale([410]).translate([980,770]),h=d3.select(".mapWrap").append("svg").attr("width","130").attr("height","505").attr("class","legend2");h.selectAll("square").append("g").attr("class","square").data(f).enter().append("rect").attr("x",3).attr("y",(function(t,e){return 115+26*e})).attr("width",25).attr("height",25).style("fill",(function(t){return y(t)})),h.selectAll(".square").data(f).enter().append("text").attr("class","axisText").attr("x",32).attr("y",(function(t,e){return 137+26*e})).text(t=>0!==t?"~ "+t:t),h.selectAll(".square").attr("transform","translate(200,200"),h.append("text").attr("class","axisText").attr("x",5).attr("y",95).text("person");const g=d3.select(".mapWrap").append("svg").attr("width","600").attr("height","140").attr("class","legend1");g.selectAll("square1").append("g").attr("class","square1").data(f).enter().append("rect").attr("x",(function(t,e){return 38.5*e+5})).attr("y",20).attr("width",37.5).attr("height",25).style("fill",(function(t){return y(t)})),g.selectAll(".square1").data(f).enter().append("g").append("text").text(t=>0!==t?"~ "+t:t).attr("transform","rotate(90)").style("text-anchor","start").attr("class","axisText").attr("x",47).attr("y",(function(t,e){return-19-38.5*e})),g.append("text").attr("class","axisText").attr("x",5).attr("y",125).text("persons"),d3.csv("data/canadian_cities.csv",t=>{d3.json("data/province_map.json",a=>{const r=c.selectAll("g").data(a.features).enter().append("g").attr("class","province"),n=d3.geoPath().projection(x);r.append("path").attr("d",n).attr("class","path").attr("fill","white"),c.selectAll(".cityDots").data(t).enter().append("circle").attr("class","cityDots").attr("r",2).attr("cx",t=>x([t.lng,t.lat])[0]).attr("cy",t=>x([t.lng,t.lat])[1]);c.selectAll(".cityName").data(t).enter().append("text").attr("class","cityName").attr("x",t=>x([t.lng,t.lat])[0]).attr("y",t=>x([t.lng,t.lat])[1]).text(t=>t.city).attr("dx",1).attr("dy",-2).style("font-size","13px"),d3.selectAll(".path").data(e).style("fill",(function(t){return y(parseInt(t.VALUE))})).on("mouseover",o).on("mouseout",d),d3.selectAll(".path").append("text").attr("transform","translate(10, 20)").text(t=>{t.GEO})})}),d3.selectAll(".path").attr("transform","translate(700, 50)").call(u)}(r);const l=[...r];l.sort((function(t,e){return parseInt(e.VALUE)-parseInt(t.VALUE)}));const i=l.reduce((t,e)=>t+parseInt(e.VALUE),0);!function(t){const e=10,a=0,r=190,l=80,o=580-a-l,d=680-e-r,i=o/t.length,c=d3.scaleThreshold().domain([1,2,3,4,5,6,7,8,9,10,11,12]).range(["#4a58dd","#2f9df5","#27d7c4","#4df884","#95fb51","#dedd32","#ffa423","#f65f18","#ba2208","#900c00","#bf3caf","#fe4b83"]),p=d3.select(".barWrap").append("svg").attr("width",o+a+l).attr("height",d+e+r).attr("class","canvas1"),u=(d3.scaleLinear().rangeRound([0,o]).domain([0,t.length]),d3.scaleBand().domain(t.map(t=>t.GEO)).rangeRound([0,o])),f=d3.axisBottom().scale(u),y=d3.scaleSqrt().domain([0,17e5]).range([0,d]),x=d3.scaleSqrt().domain([17e5,0]).range([0,d]),h=d3.axisLeft().scale(x);p.selectAll("rect").attr("class","barGroup").data(t).enter().append("rect").attr("class","bar").attr("transform","translate(65, 0)").attr("width",i).attr("x",(t,e)=>i*e).style("fill",(t,e)=>c(e)).attr("y",t=>d+20).attr("height","0").transition().duration(350).delay((function(t,e){return 30*e})).attr("y",t=>d-y(parseInt(t.VALUE))+10).attr("height",t=>y(parseInt(t.VALUE))),d3.selectAll("rect").data(t).on("mouseover",n).on("mouseout",s),p.selectAll("text").data(t).enter().append("g").append("text").attr("class","label").text(t=>parseInt(t.VALUE)).attr("y",t=>d-500).attr("height",0).transition().duration(250).delay((function(t,e){return 30*e})).attr("y",t=>d-y(parseInt(t.VALUE))+8).attr("transform"," rotate(0)").style("text-anchor","middle").attr("x",(t,e)=>95+i*e).attr("fill","darkblue"),p.append("g").attr("class","x_axis").attr("transform","translate( 65, 490)").call(f).selectAll("text").attr("transform","rotate(90)").style("text-anchor","start").style("font-size","13px").attr("x",8).attr("y",-5),p.append("g").attr("class","y_axis").attr("transform","translate(65, 10)").call(h),p.append("text").attr("x","131").attr("y","55").text("Provincial Visitors on "+t[0].REF_DATE).attr("class","subTitle"),p.append("text").attr("x",0).attr("y",15).text("Person").attr("class","axisText"),p.append("text").attr("x","165").attr("y","635").text("Canadian Province").attr("class","axisText")}(l),function(t,e){const a=d3.select(".pieWrap").append("svg").attr("width",231).attr("height",245).attr("class","pie").append("g").attr("transform","translate(115, 114)"),r=d3.scaleThreshold().domain([1,2,3,4,5,6,7,8,9,10,11,12]).range(["#4a58dd","#2f9df5","#27d7c4","#4df884","#95fb51","#dedd32","#ffa423","#f65f18","#ba2208","#900c00","#bf3caf","#fe4b83"]),n=d3.select("body").append("div").attr("class","tooltip").style("opacity",0),s=d3.pie().value(t=>+t.VALUE),l=d3.arc().innerRadius(35).outerRadius(100),o=d3.arc().innerRadius(30).outerRadius(110),d=a.selectAll("arc").data(s(t)).enter().append("g").attr("class","arc");d.append("g").append("path").attr("class","piece").attr("d",l).attr("fill",(function(t,e){return r(e)})).transition().ease(d3.easeLinear).duration(400).attrTween("d",(function(t){t.innerRadius=0;const e=d3.interpolate({startAngle:0,endAngle:0},t);return function(t){return l(e(t))}})),d3.selectAll(".piece").on("mouseover",(function(t){d3.select(this).transition().duration(0).attr("d",o).style("opacity","0.5"),n.transition().duration(0).style("opacity","0.9"),n.html(t.data.GEO+" on "+t.data.REF_DATE+"<br/>Non-Residential Travellers: "+t.data.VALUE+" persons<br/>"+Math.round(t.data.VALUE/e*100)+"%").style("left",d3.event.pageX+5+"px").style("top",d3.event.pageY-100+"px")})).on("mouseout",(function(t){d3.select(this).transition().duration(0).attr("d",l).style("opacity","1.0"),n.transition().duration(0).style("opacity",0)})),d.append("g").append("text").transition().ease(d3.easeLinear).duration(350).attr("transform",(function(t){var e=l.centroid(t);return"translate("+(e[0]-14)+","+e[1]+")"})).text((function(t){const a=Math.round(t.data.VALUE/e*100);return a>3?a+"%":null})).attr("class","text"),d.append("text").attr("x",-35).attr("y",130).text("Visitor Ratio")}(l,i),d3.selectAll(".info").remove(),d3.select(".infoWrap").append("g").data(l).append("text").attr("class","info").text(t=>i+" Tourists Have Visited Canada on "+t.REF_DATE)};d3.csv("data/travel_province_data.csv",(function(t){const e=[];t.forEach(t=>{"Newfoundland and Labrador"!=t.GEO&&"Prince Edward Island"!=t.GEO&&"Nova Scotia"!=t.GEO&&"New Brunswick"!=t.GEO&&"Quebec"!=t.GEO&&"Ontario"!=t.GEO&&"Manitoba"!=t.GEO&&"Saskatchewan"!=t.GEO&&"Alberta"!=t.GEO&&"British Columbia"!=t.GEO&&"Yukon"!=t.GEO&&"Nunavut"!=t.GEO||"Total non resident tourists"!=t["Traveller characteristics"]||"Unadjusted"!=t["Seasonal adjustment"]||"2"!=t.REF_DATE[0]||e.push(t)}),document.querySelector(".select").addEventListener("change",(function(){d3.selectAll("svg").remove(),i(e,document.querySelector(".select").value,document.querySelector(".slider").value)}));const a=["Jan","Feb","Mar","Apr","May","June","Jul","Aug","Sep","Oct","Nov","Dec"];document.querySelector(".slider").addEventListener("change",(function(){const t=document.querySelector(".slider").value;document.querySelector(".monthDisplay").innerText=a[t-1],d3.selectAll("svg").remove(),i(e,document.querySelector(".select").value,t)})),i(e)}))}]);